(()=>{"use strict";let e=!1;setTimeout((()=>{if(e){let e=new Event("windowScroll");window.addEventListener("scroll",(function(t){document.dispatchEvent(e)}))}}),0),sessionStorage.getItem("preloader")&&(document.querySelector(".preloader")&&document.querySelector(".preloader").classList.add("_hide"),document.querySelector(".wrapper").classList.add("_visible")),sessionStorage.getItem("money")||sessionStorage.setItem("money",1e4),document.querySelector(".check")&&document.querySelectorAll(".check").forEach((e=>{e.textContent=sessionStorage.getItem("money")})),document.querySelector(".game")&&(+sessionStorage.getItem("money")>=500?(sessionStorage.setItem("current-bet",500),document.querySelector(".block-bet__coins").textContent=sessionStorage.getItem("current-bet")):(sessionStorage.setItem("current-bet",0),document.querySelector(".block-bet__coins").textContent=0));const t=document.querySelector(".preloader"),o=document.querySelector(".wrapper");document.documentElement.clientWidth,document.documentElement.clientHeight;function s(e,t){let o=+sessionStorage.getItem("money");sessionStorage.setItem("money",o-e),setTimeout((()=>{document.querySelectorAll(t).forEach((e=>e.classList.add("_delete-money"))),document.querySelectorAll(t).forEach((e=>e.textContent=sessionStorage.getItem("money")))}),500),setTimeout((()=>{document.querySelectorAll(t).forEach((e=>e.classList.remove("_delete-money")))}),1900)}function c(e){document.querySelectorAll(e).forEach((e=>e.classList.add("_no-money"))),setTimeout((()=>{document.querySelectorAll(e).forEach((e=>e.classList.remove("_no-money")))}),1400)}function n(e,t){return Math.floor(Math.random()*(t-e)+e)}function r(e){for(let t=e.length-1;t>0;t--){let o=Math.floor(Math.random()*(t+1));[e[t],e[o]]=[e[o],e[t]]}return e}let a=document.querySelectorAll(".icon-anim img");document.querySelector(".icon-anim img")&&setInterval((()=>{!function(){let e=n(0,3),t=["jump","scale","rotate"],o=n(0,a.length);a.forEach((e=>{e.classList.contains("_anim-icon-jump")?e.classList.remove("_anim-icon-jump"):e.classList.contains("_anim-icon-scale")?e.classList.remove("_anim-icon-scale"):e.classList.contains("_anim-icon-rotate")&&e.classList.remove("_anim-icon-rotate")})),setTimeout((()=>{a[o].classList.add(`_anim-icon-${t[e]}`)}),100)}()}),2e4);const i=1e3;function l(){document.querySelector(".armor__count").textContent=sessionStorage.getItem("armor")}document.querySelector(".main")&&document.querySelector(".preloader").classList.contains("_hide")&&(document.querySelector(".main").classList.add("_active"),document.querySelector(".shop__button p").textContent=i,sessionStorage.getItem("armor")||sessionStorage.setItem("armor",0),l()),document.querySelector(".game")&&document.querySelector(".preloader").classList.contains("_hide")&&l();const d={state:1,current_win:0,numbers:[1,2,3,4,5,6,7,8],cards:[1,2,3,4,5,6,7,8],find_card:0},m={coeff_1:.5,coeff_2:1,coeff_3:1.5,coeff_4:2,coeff_5:2.5,coeff_6:3,coeff_7:5};function u(){s(+sessionStorage.getItem("current-bet"),".check"),document.querySelector(".block-bet__controls").classList.add("_hold"),document.querySelector(".footer__button").classList.add("_hold"),setTimeout((()=>{document.querySelectorAll(".cards__card").forEach((e=>e.classList.add("_remove"))),setTimeout((()=>{document.querySelectorAll(".cards__card").forEach((e=>e.remove()))}),2e3),function(){let e=+sessionStorage.getItem("current-bet");e<=1e3?(console.log("Ставка 1000 или менее"),m.coeff_1=.1,m.coeff_2=.7,m.coeff_3=1,m.coeff_4=1.2,m.coeff_5=1.5,m.coeff_6=1.8,m.coeff_7=2):e>1e3&&e<=2e3?(console.log("Ставка от 1000 до 2000"),m.coeff_2=1,m.coeff_3=1.1,m.coeff_4=1.3,m.coeff_5=1.7,m.coeff_6=2,m.coeff_7=2.5):e>2e3&&(console.log("Ставка больше 2500"),m.coeff_3=1.5,m.coeff_4=2,m.coeff_5=2.5,m.coeff_6=3,m.coeff_7=5)}()}),500),setTimeout((()=>{console.log(d.numbers),d.state=2,function(){let e=+sessionStorage.getItem("current-bet");e>=2500?d.numbers=[1,1,1,4,5,6,7,8]:e>=1500&&(d.numbers=[1,1,3,4,5,6,7,8])}(),function(){let e=r(d.numbers),t=r(d.cards);d.numbers=e,d.cards=t}(),_(d.cards[0],d.numbers[0],7,".cards__items_top"),_(d.cards[1],d.numbers[1],5,".cards__items_top"),_(d.cards[2],d.numbers[2],3,".cards__items_top"),_(d.cards[3],d.numbers[3],1,".cards__items_top"),_(d.cards[4],d.numbers[4],8,".cards__items_bottom"),_(d.cards[5],d.numbers[5],6,".cards__items_bottom"),_(d.cards[6],d.numbers[6],4,".cards__items_bottom"),_(d.cards[7],d.numbers[7],2,".cards__items_bottom"),document.querySelector(".info__card img").setAttribute("src",`img/game/card-${d.find_card}.png`),document.querySelector(".info__card").classList.add("_visible")}),3e3)}function _(e,t,o,s){let c=document.createElement("div");c.classList.add("cards__card"),c.classList.add("_show"),c.setAttribute("style",`--i:${o}`),c.setAttribute("data-character",t),setTimeout((()=>{c.classList.remove("_show")}),2e3);let n=document.createElement("img");setTimeout((()=>{document.documentElement.classList.contains("webp")?n.setAttribute("src","img/game/card-bg.webp"):n.setAttribute("src","img/game/card-bg.png")}),100),n.setAttribute("alt","Image"),n.classList.add("cards__front");let r=document.createElement("img");setTimeout((()=>{document.documentElement.classList.contains("webp")?r.setAttribute("src",`img/game/card-${e}.webp`):r.setAttribute("src",`img/game/card-${e}.png`)}),1e3),r.setAttribute("alt","Image"),r.classList.add("cards__back");let a=document.createElement("div");a.classList.add("cards__state");let i=document.createElement("p");i.textContent="",1==t?i.textContent="killer":2==t?i.textContent=`x${m.coeff_1}`:3==t?i.textContent=`x${m.coeff_2}`:4==t?i.textContent=`x${m.coeff_3}`:5==t?i.textContent=`x${m.coeff_4}`:6==t?i.textContent=`x${m.coeff_5}`:7==t?i.textContent=`x${m.coeff_6}`:8==t&&(i.textContent=`x${m.coeff_7}`,d.find_card=e),a.append(i),c.append(n,r,a),document.querySelector(s).append(c)}function f(e,t){let o=+sessionStorage.getItem("current-bet"),s=+sessionStorage.getItem("armor");setTimeout((()=>{t.classList.remove("_rotate")}),500),1==e&&s>0?(t.classList.add("_shadow-armor"),setTimeout((()=>{document.querySelector(".armor-block__image").classList.add("_use")}),1e3),setTimeout((()=>{document.querySelector(".armor-block__image").classList.remove("_use"),sessionStorage.setItem("armor",+sessionStorage.getItem("armor")-1),l()}),2e3)):1==e&&s<=0?(d.state=1,setTimeout((()=>{t.classList.add("_shadow-loose")}),500),setTimeout((()=>{b(),document.querySelector(".footer__win-info p").textContent="loose",document.querySelector(".footer__win-info").classList.add("_visible"),document.querySelector(".info__button-reset-box").classList.add("_visible")}),2e3)):e>1&&e<8?(2==e?d.current_win=d.current_win+o*m.coeff_1:3==e?d.current_win=d.current_win+o*m.coeff_2:4==e?d.current_win=d.current_win+o*m.coeff_3:5==e?d.current_win=d.current_win+o*m.coeff_4:6==e?d.current_win=d.current_win+o*m.coeff_5:7==e&&(d.current_win=d.current_win+o*m.coeff_6),setTimeout((()=>{t.classList.add("_shadow-win")}),500)):8==e&&(d.state=1,d.current_win=d.current_win+o*m.coeff_7,setTimeout((()=>{t.classList.add("_shadow-win")}),500),setTimeout((()=>{document.querySelector(".info__card-box").classList.add("_found")}),1500),setTimeout((()=>{document.querySelector(".footer__win-info p").textContent=`win ${d.current_win}`,document.querySelector(".footer__win-info").classList.add("_visible"),b(),document.querySelector(".info__button-reset-box").classList.add("_visible"),function(e,t,o,s){let c=Math.floor(+sessionStorage.getItem("money")+e);setTimeout((()=>{sessionStorage.setItem("money",c),document.querySelectorAll(t).forEach((e=>e.textContent=sessionStorage.getItem("money"))),document.querySelectorAll(t).forEach((e=>e.classList.add("_anim-add-money")))}),o),setTimeout((()=>{document.querySelectorAll(t).forEach((e=>e.classList.remove("_anim-add-money")))}),s)}(d.current_win,".check")}),2e3))}function b(){document.querySelectorAll(".cards__card").forEach((e=>{e.classList.contains("_open")||e.classList.add("_open"),e.classList.contains("_shadow-win")||e.classList.contains("_shadow-loose")||e.classList.contains("_shadow-armor")||e.classList.add("_rotate-complete")}))}function S(){document.querySelector(".footer__button").classList.contains("_hold")&&document.querySelector(".footer__button").classList.remove("_hold"),document.querySelector(".block-bet__controls").classList.contains("_hold")&&document.querySelector(".block-bet__controls").classList.remove("_hold"),d.state=1,d.current_win=0,d.numbers=[1,2,3,4,5,6,7,8],document.querySelector(".info__card").classList.contains("_visible")&&document.querySelector(".info__card").classList.add("_visible"),document.querySelector(".footer__win-info").classList.contains("_visible")&&document.querySelector(".footer__win-info").classList.remove("_visible"),document.querySelector(".info__button-reset-box").classList.contains("_visible")&&document.querySelector(".info__button-reset-box").classList.remove("_visible"),document.querySelector(".info__card-box").classList.contains("_found")&&document.querySelector(".info__card-box").classList.remove("_found"),document.querySelectorAll(".cards__card").forEach((e=>{e.classList.contains("_shadow-armor")&&e.classList.remove("_shadow-armor"),e.classList.contains("_shadow-loose")&&e.classList.remove("_shadow-loose"),e.classList.contains("_shadow-win")&&e.classList.remove("_shadow-win"),e.classList.contains("_rotate-complete")&&e.classList.remove("_rotate-complete"),e.classList.contains("_open")&&e.classList.remove("_open")})),document.querySelector(".info__card").classList.contains("_visible")&&document.querySelector(".info__card").classList.remove("_visible")}if(document.querySelector(".main")){const e=new Audio;e.preload="auto",e.src="files/audio_m.wav",e.loop=[!0],e.volume=[.3],document.addEventListener("click",(t=>{let o=t.target;o.closest(".volume")&&(o.closest(".volume")&&!o.closest(".volume").classList.contains("_hide")?e.pause():o.closest(".volume")&&o.closest(".volume").classList.contains("_hide")&&e.play(),o.closest(".volume").classList.toggle("_hide"))}))}if(document.querySelector(".game")){const e=new Audio;e.preload="auto",e.src="files/audio_g.wav",e.loop=[!0],e.volume=[.3],document.addEventListener("click",(t=>{let o=t.target;o.closest(".volume")&&(o.closest(".volume")&&!o.closest(".volume").classList.contains("_hide")?e.pause():o.closest(".volume")&&o.closest(".volume").classList.contains("_hide")&&e.play(),o.closest(".volume").classList.toggle("_hide"))}))}document.addEventListener("click",(e=>{let n=e.target,r=+sessionStorage.getItem("money"),a=+sessionStorage.getItem("current-bet");n.closest(".preloader__button")&&(sessionStorage.setItem("preloader",!0),t.classList.add("_hide"),o.classList.add("_visible"),document.querySelector(".main")&&document.querySelector(".preloader").classList.contains("_hide")&&document.querySelector(".main").classList.add("_active")),n.closest(".content-main__button_shop")&&document.querySelector(".main__body").classList.add("_shop"),n.closest(".main__button-home")&&document.querySelector(".main__body").classList.remove("_shop"),n.closest(".shop__button")&&(r>=i?(s(i,".check"),sessionStorage.setItem("armor",+sessionStorage.getItem("armor")+1),l()):c(".check")),n.closest(".block-bet__minus")&&a>500&&(sessionStorage.setItem("current-bet",a-500),document.querySelector(".block-bet__coins").textContent=sessionStorage.getItem("current-bet")),n.closest(".block-bet__plus")&&(r-499>a?(sessionStorage.setItem("current-bet",a+500),document.querySelector(".block-bet__coins").textContent=sessionStorage.getItem("current-bet")):c(".check")),n.closest(".block-bet__min")&&(r>=500?(sessionStorage.setItem("current-bet",500),document.querySelector(".block-bet__coins").textContent=sessionStorage.getItem("current-bet")):c(".check")),n.closest(".block-bet__max")&&(r>=500?(sessionStorage.setItem("current-bet",r),document.querySelector(".block-bet__coins").textContent=sessionStorage.getItem("current-bet")):c(".check")),n.closest(".footer__button")&&u(),n.closest(".cards__card")&&1==d.state&&(document.querySelector(".footer__button").classList.add("_anim"),setTimeout((()=>{document.querySelector(".footer__button").classList.remove("_anim")}),1e3)),n.closest(".cards__card")&&2==d.state&&(n.closest(".cards__items").classList.add("_active"),n.closest(".cards__card").classList.add("_rotate"),n.closest(".cards__card").classList.add("_open"),setTimeout((()=>{n.closest(".cards__items").classList.remove("_active")}),1e3),f(+n.closest(".cards__card").dataset.character,n.closest(".cards__card"))),n.closest(".info__button-reset")&&S()})),window.FLS=!0,function(e){let t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}((function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)})),window.addEventListener("load",(function(){document.querySelector("body")&&setTimeout((function(){document.querySelector("body").classList.add("_loaded")}),200)}))})();